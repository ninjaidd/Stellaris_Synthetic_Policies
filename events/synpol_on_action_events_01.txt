namespace = synpol

event = {
    id = synpol.1
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        any_playable_country = {
			any_owned_species = {
				has_citizenship_type = {
					type = citizenship_assimilation
					country = prev
				}
			}
		}
    }

    immediate = {
        set_update_modifiers_batch = begin

        # TODO needs to be called instead of action.64
        # TODO needs to check some flags and living standard (tech assim) to determine cybernetic or synthetic
        # TODO integration for bionics
        # TODO possible: remove species_flag, add timed flag, call action.65 variant and scripted_effect assimilation_effect variants

        set_update_modifiers_batch = end
    }
}

# ASSIMILATION PATH

# on_yearly_pulse
#     action.64

# action.64
#     modify species
#     set relational flags
#     action.65 on planets

# action.65
#     counter
#     assimilation_effect (scripted effect)

# assimilation_effect
#     convert species based on relational flags