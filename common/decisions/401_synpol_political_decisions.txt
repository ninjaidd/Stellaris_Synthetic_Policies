#TODO custom tooltips
decision_synpol_cybernetic_modification = {
	owned_planets_only = yes
	sound = event_the_flesh_is_weak
	icon = decision_cybernetics

	resources = {
		category = decisions
		cost = {
			energy = 500
		}
	}

	potential = {
        owner = {
            NOT = { has_ethic = ethic_gestalt_consciousness }
            has_ascension_perk = ap_synpol_the_flesh_is_weak
            has_country_flag = flesh_weakened
        }
        any_owned_pop = {
            is_sapient = yes
            species = {
                NOR = {
                    has_trait = trait_cybernetic
                    has_trait = trait_mechanical
                    has_trait = trait_machine_unit
                    has_trait = leader_trait_curator
                }
            }
        }
	}

	effect = {
        while = {
            limit = {
                any_owned_pop = {
                    is_sapient = yes
                    species = {
                        NOR = {
                            has_trait = trait_cybernetic
                            has_trait = trait_mechanical
                            has_trait = trait_machine_unit
                            has_trait = leader_trait_curator
                        }
                    }
                }
            }
            random_owned_pop = {
                limit = {
                    is_sapient = yes
                    species = {
                        NOR = {
                            has_trait = trait_cybernetic
                            has_trait = trait_mechanical
                            has_trait = trait_machine_unit
                            has_trait = leader_trait_curator
                        }
                    }
                }
                
                # From common/scripted_effects/00_scripted_effects.txt > create_cybernetic_species_mod 
                species = {
                    create_species = {
                        is_mod = yes
                        name = this
                        plural = this
                        class = this
                        portrait = this
                        traits = this
                        can_be_modified = this
                        homeworld = this
                        namelist = this
                        gender = this
                        traits = {
                            ideal_planet_class = this
                            trait = trait_cybernetic
                        }
                    }
                    save_event_target_as = changing_species
                }

                owner = { # TODO scope??
                    every_owned_pop = {
                        limit = { is_exact_same_species = event_target:changing_species }
                        change_species = last_created_species
                    }
                }

            }
        }
	}

	ai_weight = { weight = 0 }
}

decision_synpol_synthetic_modification = {
	owned_planets_only = yes
	sound = event_synthetic_evolution
	icon = decision_machine_sapience

	resources = {
		category = decisions
		cost = {
			energy = 500
		}
	}

	potential = {
        owner = {
            NOT = { has_ethic = ethic_gestalt_consciousness }
            has_ascension_perk = ap_synpol_synthetic_evolution
            has_country_flag = synthetic_empire
        }
        any_owned_pop = {
            is_sapient = yes
            species = {
                has_trait = trait_cybernetic
                NOR = {
                    has_trait = trait_mechanical
                    has_trait = trait_machine_unit
                    has_trait = leader_trait_curator
                }
            }
        }
	}

	effect = {
        every_galaxy_species = {
            limit = {
                has_species_flag = synth_for@prev.owner #root # TODO scope??
            }
            save_event_target_as = synth_species
        }

        random_owned_pop = {
            limit = {
                is_sapient = yes
                species = {
                    has_trait = trait_cybernetic
                    NOR = {
                        has_trait = trait_mechanical
                        has_trait = trait_machine_unit
                        has_trait = leader_trait_curator
                    }
                }
            }
            species = {
                save_event_target_as = changing_species
            }

            owner = { # TODO scope??
                every_owned_pop = {
                    limit = { is_exact_same_species = event_target:changing_species }
                    change_species = synth_species
                }
            }
        }
	}

	ai_weight = { weight = 0 }
}